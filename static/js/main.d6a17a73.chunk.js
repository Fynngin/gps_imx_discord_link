(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{131:function(e,n,t){e.exports={square_btn:"connectBtnStyle_square_btn__3KQd4",connectBtnText:"connectBtnStyle_connectBtnText__2c_Wj",imx_logo:"connectBtnStyle_imx_logo__C-M-z",kolectiv_input:"connectBtnStyle_kolectiv_input__3cqwQ"}},325:function(e,n,t){},327:function(e,n,t){},353:function(e,n){},355:function(e,n){},375:function(e,n){},377:function(e,n){},378:function(e,n){},401:function(e,n){},403:function(e,n){},435:function(e,n){},437:function(e,n){},438:function(e,n){},443:function(e,n){},445:function(e,n){},451:function(e,n){},453:function(e,n){},472:function(e,n){},484:function(e,n){},487:function(e,n){},503:function(e,n){},505:function(e,n){},548:function(e,n){},563:function(e,n){},565:function(e,n){},585:function(e,n,t){"use strict";t.r(n);var r=t(70),c=t.n(r),o=t(303),i=t.n(o),s=(t(325),t(4)),a=t.n(s),u=t(186),d=t(191),l=(t(327),t(304)),h=t(20);function f(e){var n=e.user;return Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{style:{width:"150px",height:"150px",borderRadius:"100%"},src:"https://cdn.discordapp.com/avatars/".concat(n.id,"/").concat(n.avatar,".png"),alt:"User Avatar"}),Object(h.jsxs)("h2",{children:["Hello ",n.username]})]})}var j,p=t(131),b=t.n(p),m=t(313),x=t.n(m);!function(e){e[e.Initializing=0]="Initializing",e[e.DiscordError=1]="DiscordError",e[e.DiscordConnected=2]="DiscordConnected",e[e.ImxError=3]="ImxError",e[e.ImxConnected=4]="ImxConnected",e[e.RoleGrantingError=5]="RoleGrantingError",e[e.RoleGranted=6]="RoleGranted",e[e.EthAddrDoesntMatchKolectiv=7]="EthAddrDoesntMatchKolectiv",e[e.NoAssets=8]="NoAssets",e[e.KolectivUserNotFound=9]="KolectivUserNotFound"}(j||(j={}));var g=function(){var e=Object(r.useState)({}),n=Object(d.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(j.Initializing),i=Object(d.a)(o,2),s=i[0],p=i[1];function m(){return(m=Object(u.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g().then((function(e){var n=e.address;p(j.ImxConnected),_(n,t.id)})).catch((function(){p(j.ImxError)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return new l.a("https://link.x.immutable.com").setup({})}function _(e,n){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({url:"https://fynngin.api.stdlib.com/greenpark-nft-verification@dev/nft_role_grant",data:JSON.stringify({discordUser:t,address:n}),method:"POST",headers:{"content-type":"application/json"}}).then((function(){p(j.RoleGranted)})).catch((function(e){switch(e.response.data.error.err_code){case"eth_addr_no_match":p(j.EthAddrDoesntMatchKolectiv);break;case"no_assets":p(j.NoAssets);break;case"no_imx_address":p(j.ImxError);break;case"kolectiv_user_not_found":p(j.KolectivUserNotFound);break;case"no_discord_user":p(j.DiscordError);break;default:p(j.RoleGrantingError)}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.hash.slice(1)),n=[e.get("access_token"),e.get("token_type")],t=n[0],r=n[1];t?fetch("https://discord.com/api/users/@me",{headers:{authorization:"".concat(r," ").concat(t)}}).then((function(e){return e.json()})).then((function(e){c(e),p(j.DiscordConnected)})).catch((function(){p(j.DiscordError),console.error()})):p(j.DiscordError)}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[[j.NoAssets,j.RoleGranted].includes(s)?Object(h.jsx)("p",{children:"Wallet linked!"}):Object(h.jsx)(h.Fragment,{}),function(){switch(s){case j.Initializing:return Object(h.jsx)("p",{children:"Getting discord information..."});case j.DiscordError:return Object(h.jsx)("p",{children:"There was an error linking your Discord account. Please try again."});case j.DiscordConnected:return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{user:t}),Object(h.jsx)("form",{onSubmit:function(){return function(){return m.apply(this,arguments)}()},children:Object(h.jsx)("div",{children:Object(h.jsxs)("button",{type:"submit",className:b.a.square_btn,children:[Object(h.jsx)("h2",{className:b.a.connectBtnText,children:"Connect"}),Object(h.jsx)("img",{className:b.a.imx_logo,src:"".concat("/imx_test","/imx_logo.svg"),alt:"ImmutableX Logo"})]})})})]});case j.ImxError:return Object(h.jsx)("p",{children:"There was an error linking your Immutable Wallet. Please try again."});case j.ImxConnected:return Object(h.jsx)("p",{children:"Immutable Wallet connected! Checking assets and granting the role..."});case j.RoleGrantingError:return Object(h.jsx)("p",{children:"Couldn't grant the Discord Role. Do you own a Greenpark NFT?"});case j.KolectivUserNotFound:return Object(h.jsx)("p",{children:"We couldn't find that Kolectiv user :( Maybe a typo?"});case j.EthAddrDoesntMatchKolectiv:return Object(h.jsx)("p",{children:"Your Ethereum Address doesn't match the given Kolectiv user."});case j.NoAssets:return Object(h.jsx)("p",{children:"Seems like you don't own any Greenpark NFTs :("});case j.RoleGranted:return Object(h.jsx)("p",{children:"Role successfully granted! Enjoy :)"});default:return Object(h.jsx)("p",{children:"An unknown error occured. Please try again."})}}()]})})},_=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,594)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),_()}},[[585,1,2]]]);
//# sourceMappingURL=main.d6a17a73.chunk.js.map