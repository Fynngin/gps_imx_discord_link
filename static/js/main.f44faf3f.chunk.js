(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(n,t,e){n.exports={square_btn:"connectBtnStyle_square_btn__30eW1",connectBtnText:"connectBtnStyle_connectBtnText__2YAB3",imx_logo:"connectBtnStyle_imx_logo__1wECb"}},313:function(n,t,e){},315:function(n,t,e){},341:function(n,t){},343:function(n,t){},363:function(n,t){},365:function(n,t){},366:function(n,t){},389:function(n,t){},391:function(n,t){},423:function(n,t){},425:function(n,t){},426:function(n,t){},431:function(n,t){},433:function(n,t){},439:function(n,t){},441:function(n,t){},460:function(n,t){},472:function(n,t){},475:function(n,t){},491:function(n,t){},493:function(n,t){},536:function(n,t){},551:function(n,t){},553:function(n,t){},556:function(n,t,e){"use strict";e.r(t);var c=e(69),r=e.n(c),o=e(292),i=e.n(o),a=(e(313),e(4)),s=e.n(a),u=e(183),l=e(188),d=(e(315),e(293)),f=e(25);function h(n){var t=n.user;return Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{style:{width:"150px",height:"150px",borderRadius:"100%"},src:"https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png"),alt:"User Avatar"}),Object(f.jsxs)("h2",{children:["Hello ",t.username]})]})}var p,j=e(128),m=e.n(j);!function(n){n[n.Initializing=0]="Initializing",n[n.DiscordError=1]="DiscordError",n[n.DiscordConnected=2]="DiscordConnected",n[n.ImxError=3]="ImxError",n[n.ImxConnected=4]="ImxConnected",n[n.RoleGrantingError=5]="RoleGrantingError",n[n.RoleGranted=6]="RoleGranted"}(p||(p={}));var x=function(){var n=Object(c.useState)({}),t=Object(l.a)(n,2),e=t[0],r=t[1],o=Object(c.useState)(p.Initializing),i=Object(l.a)(o,2),a=i[0],j=i[1];function x(){return(x=Object(u.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:g().then((function(n){var t=n.address;j(p.ImxConnected),b(t,e.id)})).catch((function(){j(p.ImxError)}));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(){return new d.a("https://link.x.immutable.com").setup({})}function b(n,t){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(s.a.mark((function n(t,e){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://fynngin.api.stdlib.com/greenpark-nft-verification@dev/nft-role-grant?user=".concat(e,"&address=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(){j(p.RoleGranted)})).catch((function(){j(p.RoleGrantingError)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var n=new URLSearchParams(window.location.hash.slice(1)),t=[n.get("access_token"),n.get("token_type")],e=t[0],c=t[1];e?fetch("https://discord.com/api/users/@me",{headers:{authorization:"".concat(c," ").concat(e)}}).then((function(n){return n.json()})).then((function(n){r(n),j(p.DiscordConnected)})).catch((function(){j(p.DiscordError),console.error()})):j(p.DiscordError)}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:function(){switch(a){case p.Initializing:return Object(f.jsx)("p",{children:"Getting discord information..."});case p.DiscordError:return Object(f.jsx)("p",{children:"There was an error linking your Discord account. Please try again."});case p.DiscordConnected:return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h,{user:e}),Object(f.jsxs)("button",{className:m.a.square_btn,onClick:function(){return function(){return x.apply(this,arguments)}()},children:[Object(f.jsx)("h2",{className:m.a.connectBtnText,children:"Connect"}),Object(f.jsx)("img",{className:m.a.imx_logo,src:"".concat("/imx_test","/imx_logo.svg"),alt:"ImmutableX Logo"})]})]});case p.ImxError:return Object(f.jsx)("p",{children:"There was an error linking your Immutable Wallet. Please try again."});case p.ImxConnected:return Object(f.jsx)("p",{children:"Immutable Wallet connected! Checking assets and granting the role..."});case p.RoleGrantingError:return Object(f.jsx)("p",{children:"Couldn't grant the Discord Role. Do you own a Greenpark NFT?"});case p.RoleGranted:return Object(f.jsx)("p",{children:"Role successfully granted! Enjoy :)"});default:return Object(f.jsx)("p",{children:"An unknown error occured. Please try again."})}}()})})},g=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,565)).then((function(t){var e=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;e(n),c(n),r(n),o(n),i(n)}))};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root")),g()}},[[556,1,2]]]);
//# sourceMappingURL=main.f44faf3f.chunk.js.map